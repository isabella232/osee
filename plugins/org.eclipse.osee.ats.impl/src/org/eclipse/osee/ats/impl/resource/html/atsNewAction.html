<?include path="4000000000000000 pageDeclaration.html"?>
<head>
  <meta name="author" content="Donald G. Dunne" />
  <title>OSEE ATS</title>
  <style>
    <?include path="4000000000000013 atsCore.css"?>
  </style>
  <script>
		<?include path="4000000000000002 oseeCore.js"?>
  </script>
</head>

<body>

<div id="atsBody">
<b>Create a New Action</b>
<form id="oseeAppForm">		
	<?widgets?>
	<?ActionableItemDataList?>
	<br/><br/>
	<input type="button" id="populateButton" value="Populate" />
	<input type="button" id="clearButton" value="Clear" />
	<input type="button" id="createButton" value="Create" />
</form>
</div>

<script>
	function createAction() {
		post_with_parms("/ats/action", getParams());
	}

	function getParams() {
		var params = new Object();
		var form = document.getElementById("oseeAppForm");
		
		var inputElements = form.getElementsByTagName("input");
		for(var i = 0; i < inputElements.length; i++) {
		var inputElement = inputElements[i];
			var id = inputElement.getAttribute("id");
			if (id == null) {
				console.log(inputElement);
				console.log("has no id");
			} else {
				params[id] = inputElement.value;
			}
		}
		params["changeType"] = document.getElementById("changeType").value
		return params;
	}
	
   function populateTestData() {
		document.getElementById('ats_title').value = 'Test Action - Delete Me';
		document.getElementById('desc').value = 'This is my description';
		document.getElementById("changeType").value = 'Improvement';
	}

   function clearTestData() {
		document.getElementById('ats_title').value = '';
		document.getElementById('desc').value = '';
		document.getElementById("actionableItems").value = '';
		document.getElementById("changeType").value = '';
		document.getElementById("userId").value = '';
	}

   
	var button = document.getElementById("createButton");
	button.addEventListener("click", createAction);
	var button2 = document.getElementById("populateButton");
	button2.addEventListener("click", populateTestData);
	var button3 = document.getElementById("clearButton");
	button3.addEventListener("click", clearTestData);
</script>

</body>
</html>