<?include path="4000000000000000 pageDeclaration.html"?>
<head>
  <meta name="author" content="Donald G. Dunne" />
  <title>OSEE ATS</title>
  <style>
    <?include path="4000000000000013 atsCore.css"?>
  </style>
  <script>
		<?include path="4000000000000002 oseeCore.js"?>
  </script>
</head>

<body>

<div id="atsBody">
<b>Create a New Action</b>
<form id="oseeAppForm">		
	<?widgets?>
	<?ActionableItemDataList?>
	<br/><br/>
	<input type="button" id="createButton" value="Create" />
</form>
</div>

<script>
	function createAction() {
		post_with_parms("/ats/action", getParams());
	}

	function getParams() {
		var params = new Object();
		var form = document.getElementById("oseeAppForm");
		var inputElements = form.getElementsByTagName("input");
		
		for(var i = 0; i < inputElements.length; i++) {
		var inputElement = inputElements[i];
			var id = inputElement.getAttribute("id");
			if (id == null) {
				console.log(inputElement);
				console.log("has no id");
			} else {
				params[id] = inputElement.value;
			}
		}
		return params;
	}
	document.onmousedown=checkRightClick;  
   function checkRightClick(e) {
        var rightclick;
        if (!e) var e = window.event;
        if (e.which) rightclick = (e.which == 3);
        else if (e.button) rightclick = (e.button == 2);
        if (rightclick) {
            populateTestData();
        }
   }
   function populateTestData() {
		document.getElementById('ats_title').value = 'This is my title';
		document.getElementById('desc').value = 'This is my description';
		document.getElementById("actionableItems").value = 'SAW Code';
		document.getElementById("changeType").value = 'Improvement';
	}

   
	var button = document.getElementById("createButton");
	button.addEventListener("click", createAction);
	button.addEventListener("click", populateTestData);
</script>

</body>
</html>