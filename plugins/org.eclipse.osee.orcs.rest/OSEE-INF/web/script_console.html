<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"></meta>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
    
    <link rel="stylesheet" type="text/css" href="/ajax/libs/bootstrap/3.3.2/css/bootstrap.min.css"></link>

	 <title>OSEE - ORCS Script Console</title>

	 <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="/ajax/libs/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body ng-app="formApp" ng-controller="formController">

   <div class="container">
      <div class="page-header">
         <table>
            <tr>
               <td>
                  <h1>
                     <span class="pull-left glyphicon glyphicon-flash"></span> OSEE - ORCS Script Console
                  </h1>
               </td>
               <td>&nbsp;&nbsp;&nbsp;</td>
               <td><span class="label label-danger">Beta</span></td>
            </tr>
         </table>
      </div>

      <form class="form-horizontal" role="form" enctype="application/x-www-form-urlencoded" ng-submit="processForm()">
         <div class="form-group">
            <label for="script">Console</label>
            <textarea class="form-control" rows="6" placeholder="start from ...;" ng-model="formData.script"
               title="Type ORCS Script in text area. Click button to execute."></textarea>
         </div>
         <div class="form-group">
            <label for="parameters">Parameters</label>
            <textarea class="form-control" rows="2" placeholder="key1=value1" ng-model="formData.parameters"
               title="Type ORCS Script parameters in the text area. Click button to execute."></textarea>
         </div>
         <div class="form-group">
            <div class="col-sm-offset-0 col-sm-10">
               <div class="checkbox">
                  <label><input type="checkbox" ng-model="formData.debug">Debug</label>
               </div>
            </div>
         </div>
         <div class="container">
            <div class="form-group">
               <button type="submit" class="btn btn-primary" ng-model="formData.orcsScriptExecutionType" value="execute">Execute</button>
            </div>
         </div>
      </form>

      <div class="container-fluid well" ng-show="message">
         <textarea rows="30" class="form-control">{{ message }}</textarea>
      </div>
   </div>

<script src="/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="/ajax/libs/angularjs/1.2.28/angular.min.js"></script>
<script src="/ajax/libs/angularjs/1.2.28/angular-resource.min.js"></script>
<script>
	var formApp = angular.module('formApp', []);

	function formController($scope, $http) {
		$scope.formData = {};
		$scope.message = '';
		$scope.processForm = function() {
			$http({
				method : 'POST',
				url : '../',
				data : $.param($scope.formData),
				headers : {
					'Content-Type' : 'application/x-www-form-urlencoded',
					'Accept' : 'application/json'
				}
			}).success(function(data, status, headers, config) {
				console.log(data);
				$scope.message = angular.toJson(data, true);
			}).error(function(data, status, headers, config) {
				console.log(data);
				$scope.message = 'error -  status: ' + status + ' ' + data;
			});
		};
	}
</script>   
</body>
</html>